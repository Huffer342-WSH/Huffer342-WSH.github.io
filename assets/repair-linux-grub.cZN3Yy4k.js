import{_ as g}from"./ValaxyMain.vue_vue_type_style_index_0_lang.45YYFxBa.js";import{f as m,a as c}from"./chunks/vue-router.aOcOW5FA.js";import{A as u,M as F,a3 as a,u as b,N as y,U as e,S as s,R as v,W as t}from"./framework.CrQDr1gD.js";import"./app.BysTI9HO.js";import"./chunks/dayjs.Byk5cVHE.js";import"./chunks/vue-i18n.KUtIpHG9.js";import"./chunks/pinia.HY29yXn_.js";import"./chunks/@vueuse/motion.CRM0IDQD.js";import"./chunks/nprogress.Cino7761.js";import"./YunComment.vue_vue_type_style_index_0_lang.BF_gtew7.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.BK-sBKTS.js";import"./post.B3t-mDxK.js";const C="/assets/disk.RmXxwUcq.png",B="/assets/disk-gui.CLDpwcS_.png",f=m("/posts/myNotes/guide/repair-linux-grub",async o=>JSON.parse('{"title":"使用LiveCD修复Ubuntu的GRUB","description":"","frontmatter":{"layout":"post","title":"使用LiveCD修复Ubuntu的GRUB","date":"2024-09-19 14:38:00","categories":["教程"]},"headers":[],"relativePath":"pages/posts/myNotes/guide/repair-linux-grub.md","lastUpdated":null}'),{lazy:(o,h)=>o.name===h.name}),V={__name:"repair-linux-grub",setup(o,{expose:h}){var d;const{data:r}=f(),p=c(),n=Object.assign(p.meta.frontmatter||{},((d=r.value)==null?void 0:d.frontmatter)||{});return p.meta.frontmatter=n,u("pageData",r.value),u("valaxy:frontmatter",n),globalThis.$frontmatter=n,h({frontmatter:{layout:"post",title:"使用LiveCD修复Ubuntu的GRUB",date:"2024-09-19 14:38:00",categories:["教程"]}}),(l,i)=>{const k=g;return y(),F(k,{frontmatter:b(n)},{"main-content-md":a(()=>[i[0]||(i[0]=s("p",null,"捣鼓往移动硬盘里装系统的时候一不小心把系统引导搞丢了，导致一开机就进了Grub的命令行界面，而不是正常的选系统界面。这个时候我的系统已经装在硬盘里了，只不过引导出了问题，所以可以在Grub的命令行界面手动引导系统。",-1)),v(" more "),i[1]||(i[1]=s("p",null,[t("参考资料: "),s("a",{href:"https://askubuntu.com/questions/831216/how-can-i-reinstall-grub-to-the-efi-partition",target:"_blank",rel:"noreferrer"},"How can I reinstall GRUB to the EFI partition?")],-1)),i[2]||(i[2]=s("ol",null,[s("li",null,[s("strong",null,"挂载Ubuntu系统分区"),t("： 这一步挂载你的Ubuntu根分区。你需要根据系统的实际情况来指定正确的Ubuntu分区。可以打开“磁盘”软件来查看原来的系统在那个分区里：")])],-1)),i[3]||(i[3]=s("p",null,[s("img",{src:C,alt:"磁盘"}),s("img",{src:B,alt:"磁盘界面"})],-1)),i[4]||(i[4]=s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mount"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /dev/sdXn"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /mnt")])])]),s("button",{class:"collapse"})],-1)),i[5]||(i[5]=s("p",null,[t("其中，"),s("code",null,"/dev/sdXn"),t(" 是你的Ubuntu系统分区。")],-1)),i[6]||(i[6]=s("ol",{start:"2"},[s("li",null,[s("p",null,[s("strong",null,"挂载EFI分区"),t("： 接下来需要挂在EFT分区，GRUB和Windwos Boot Manager都是安装在这个分区的。这个分区一般都是硬盘的第一个分区，分区类型是‘EFI System’")]),s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mount"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /dev/sdY1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /mnt/boot/efi")])])]),s("button",{class:"collapse"})]),s("p",null,[t("其中，"),s("code",null,"/dev/sdY1"),t(" 是你的EFI分区。")])]),s("li",null,[s("p",null,[s("strong",null,"挂载必要的文件系统"),t("：")]),s("p",null,"为了确保chroot环境中的命令能正常工作，需要将当前系统的设备、进程和系统信息文件系统挂载到新环境中。"),s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"for"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /dev"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /dev/pts"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /proc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /sys"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /run"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"do"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mount"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -B"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $i "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"/mnt"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$i; "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"done")])])]),s("button",{class:"collapse"})])]),s("li",null,[s("p",null,[s("strong",null,"切换到新根目录"),t("： 使用 "),s("code",null,"chroot"),t(" 命令把根目录换成指定的目的目录，这样你可以像在正常的Ubuntu系统中一样执行命令。")]),s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chroot"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /mnt")])])]),s("button",{class:"collapse"})])]),s("li",null,[s("p",null,[s("strong",null,"安装GRUB到指定硬盘"),t("： 在chroot环境下，运行 "),s("code",null,"grub-install"),t(" 来将GRUB安装到指定的硬盘。你需要根据你的系统设置指定正确的硬盘设备，例如 "),s("code",null,"/dev/sda"),t(" 或其他。")]),s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"grub-install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /dev/sdX")])])]),s("button",{class:"collapse"})]),s("p",null,[t("其中，"),s("code",null,"/dev/sdX"),t(" 是你的硬盘（而不是分区）。")])]),s("li",null,[s("p",null,[s("strong",null,"更新GRUB配置文件"),t("： 安装完GRUB后，建议更新GRUB配置文件以确保它正确识别系统中的操作系统。")]),s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"update-grub")])])]),s("button",{class:"collapse"})])]),s("li",null,[s("p",null,[s("strong",null,"退出chroot并卸载挂载的文件系统"),t("： 完成所有操作后，退出chroot并卸载之前挂载的文件系统。")]),s("div",{style:{"max-height":"500px"},class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"exit")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," umount"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -R"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /mnt")])])]),s("button",{class:"collapse"})])]),s("li",null,[s("p",null,[s("strong",null,"重启系统"),t("： 最后，从LiveCD中退出并重新启动计算机，系统应该可以正常引导。")])])],-1))]),"main-header":a(()=>[e(l.$slots,"main-header")]),"main-header-after":a(()=>[e(l.$slots,"main-header-after")]),"main-nav":a(()=>[e(l.$slots,"main-nav")]),"main-content-before":a(()=>[e(l.$slots,"main-content-before")]),"main-content":a(()=>[e(l.$slots,"main-content")]),"main-content-after":a(()=>[e(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(l.$slots,"main-nav-after")]),comment:a(()=>[e(l.$slots,"comment")]),footer:a(()=>[e(l.$slots,"footer")]),aside:a(()=>[e(l.$slots,"aside")]),"aside-custom":a(()=>[e(l.$slots,"aside-custom")]),default:a(()=>[e(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{V as default,f as usePageData};
