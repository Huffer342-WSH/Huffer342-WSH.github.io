import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.45YYFxBa.js";import{f as g,a as F}from"./chunks/vue-router.aOcOW5FA.js";import{A as d,M as y,a3 as a,u as m,N as C,U as e,S as s,W as i}from"./framework.CrQDr1gD.js";import"./app.BysTI9HO.js";import"./chunks/dayjs.Byk5cVHE.js";import"./chunks/vue-i18n.KUtIpHG9.js";import"./chunks/pinia.HY29yXn_.js";import"./chunks/@vueuse/motion.CRM0IDQD.js";import"./chunks/nprogress.Cino7761.js";import"./YunComment.vue_vue_type_style_index_0_lang.BF_gtew7.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.BK-sBKTS.js";import"./post.B3t-mDxK.js";const _="/assets/include.nJmMzl4J.png",u="/assets/cmake-showinlcude.ByjR8ac9.png",A=g("/posts/myNotes/guide/Solve_the_problem_of_CMake_printing_a_lot_of_included_information_when_building_with_MSVC",async h=>JSON.parse('{"title":"解决CMake在使用MSVC时构建打印大量包含信息的问题","description":"","frontmatter":{"layout":"post","title":"解决CMake在使用MSVC时构建打印大量包含信息的问题","date":"2024-10-28 16:58:40","categories":[],"excerpt":null,"hide":false},"headers":[{"level":2,"title":"解决方案","slug":"解决方案","link":"#解决方案","children":[]},{"level":2,"title":"解决过程","slug":"解决过程","link":"#解决过程","children":[{"level":3,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":3,"title":"原因","slug":"原因","link":"#原因","children":[]},{"level":3,"title":"解决","slug":"解决","link":"#解决","children":[]}]}],"relativePath":"pages/posts/myNotes/guide/Solve_the_problem_of_CMake_printing_a_lot_of_included_information_when_building_with_MSVC.md","lastUpdated":null}'),{lazy:(h,n)=>h.name===n.name}),X={__name:"Solve_the_problem_of_CMake_printing_a_lot_of_included_information_when_building_with_MSVC",setup(h,{expose:n}){var p;const{data:k}=A(),E=F(),t=Object.assign(E.meta.frontmatter||{},((p=k.value)==null?void 0:p.frontmatter)||{});return E.meta.frontmatter=t,d("pageData",k.value),d("valaxy:frontmatter",t),globalThis.$frontmatter=t,n({frontmatter:{layout:"post",title:"解决CMake在使用MSVC时构建打印大量包含信息的问题",date:"2024-10-28 16:58:40",categories:[],excerpt:null,hide:!1}}),(l,r)=>{const o=c;return C(),y(o,{frontmatter:m(t)},{"main-content-md":a(()=>r[0]||(r[0]=[s("h2",{id:"解决方案",tabindex:"-1"},[i("解决方案 "),s("a",{class:"header-anchor",href:"#解决方案","aria-label":'Permalink to "解决方案"'},"​")],-1),s("div",{style:{"max-height":"500px"},class:"language-cmake vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cmake"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"MSVC"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    message"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(STATUS "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Using MSVC"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 关闭警告 C4819: 无效的字符。避免中文注释被警告")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    add_compile_options"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'        "/wd4819"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    )")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 关闭 /showIncludes")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/showIncludes"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CMAKE_DEPFILE_FLAGS_C "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${CMAKE_DEPFILE_FLAGS_C}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/showIncludes"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CMAKE_DEPFILE_FLAGS_CXX "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${CMAKE_DEPFILE_FLAGS_CXX}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")])])]),s("button",{class:"collapse"})],-1),s("h2",{id:"解决过程",tabindex:"-1"},[i("解决过程 "),s("a",{class:"header-anchor",href:"#解决过程","aria-label":'Permalink to "解决过程"'},"​")],-1),s("h3",{id:"问题",tabindex:"-1"},[i("问题 "),s("a",{class:"header-anchor",href:"#问题","aria-label":'Permalink to "问题"'},"​")],-1),s("p",null,[i("CMake选择MSVC作为编译器时，构建目标会把include的头文件全都列出来，非常的烦人。 "),s("img",{src:_,alt:"包含信息"})],-1),s("h3",{id:"原因",tabindex:"-1"},[i("原因 "),s("a",{class:"header-anchor",href:"#原因","aria-label":'Permalink to "原因"'},"​")],-1),s("p",null,[i("去上网搜索以下可以知道这个编译时是启用了"),s("code",null,"/showIncludes"),i("导致的。具体可以看微软的参考文档"),s("a",{href:"https://learn.microsoft.com/en-us/cpp/build/reference/showincludes-list-include-files?view=msvc-170",target:"_blank",rel:"noreferrer"},"《/showIncludes (List include files)》")],-1),s("p",null,[i("但是我并没有添加"),s("code",null,"/showIncludes"),i("参数，那只能是CMake自己给我加上的了，到CMake的安装目录里去搜索"),s("code",null,"/showIncludes"),i("文本，果然发现给我加了这个参数")],-1),s("figure",null,[s("img",{src:u,alt:"alt text",loading:"lazy",decoding:"async"})],-1),s("div",{style:{"max-height":"500px"},class:"language-cmake vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cmake"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"MSVC_VERSION"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," GREATER"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 1300)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    set"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(CMAKE_DEPFILE_FLAGS_"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"${lang}"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "/showIncludes"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    set"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(CMAKE_"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"${lang}"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_DEPFILE_FORMAT "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"msvc"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  endif"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("用mseeage打印以下这个变量就可以看到"),s("code",null,"/showIncludes"),i("：")],-1),s("div",{style:{"max-height":"500px"},class:"language-cmake vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cmake"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"message"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(STATUS "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"CMAKE_DEPFILE_FLAGS_C = ${CMAKE_DEPFILE_FLAGS_C}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"message"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(STATUS "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"CMAKE_DEPFILE_FLAGS_CXX = ${CMAKE_DEPFILE_FLAGS_CXX}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),s("button",{class:"collapse"})],-1),s("p",null,"输出如下",-1),s("div",{style:{"max-height":"500px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[cmake] -- CMAKE_DEPFILE_FLAGS_C = /showIncludes")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[cmake] -- CMAKE_DEPFILE_FLAGS_CXX = /showIncludes")])])]),s("button",{class:"collapse"})],-1),s("h3",{id:"解决",tabindex:"-1"},[i("解决 "),s("a",{class:"header-anchor",href:"#解决","aria-label":'Permalink to "解决"'},"​")],-1),s("p",null,[i("这样的话我们就在"),s("code",null,"CMAKE_DEPFILE_FLAGS_C"),i("和"),s("code",null,"CMAKE_DEPFILE_FLAGS_CXX"),i("里面去除"),s("code",null,"/showIncludes"),i("就可以了，使用CMake的string命令中的"),s("code",null,"REPLACE"),i("命令，格式如下：")],-1),s("div",{style:{"max-height":"500px"},class:"language-cmake vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cmake"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE <match_string> <replace_string> <output_variable> <input> [<input>...])")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("那从那两个变量里面去除"),s("code",null,"/showIncludes"),i("的语句就是：")],-1),s("div",{style:{"max-height":"500px"},class:"language-cmake vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cmake"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/showIncludes"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CMAKE_DEPFILE_FLAGS_C "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${CMAKE_DEPFILE_FLAGS_C}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/showIncludes"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CMAKE_DEPFILE_FLAGS_CXX "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${CMAKE_DEPFILE_FLAGS_CXX}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),s("button",{class:"collapse"})],-1),s("p",null,"把功能完善以下，顺便把中文注释报错也屏蔽一下，得到的CMake代码如下：",-1),s("div",{style:{"max-height":"500px"},class:"language-cmake vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"cmake"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"MSVC"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    message"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(STATUS "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Using MSVC"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 关闭警告 C4819: 无效的字符。避免中文注释被警告")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    add_compile_options"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'        "/wd4819"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    )")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 关闭 /showIncludes")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/showIncludes"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CMAKE_DEPFILE_FLAGS_C "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${CMAKE_DEPFILE_FLAGS_C}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    string"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REPLACE "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/showIncludes"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CMAKE_DEPFILE_FLAGS_CXX "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${CMAKE_DEPFILE_FLAGS_CXX}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")])])]),s("button",{class:"collapse"})],-1)])),"main-header":a(()=>[e(l.$slots,"main-header")]),"main-header-after":a(()=>[e(l.$slots,"main-header-after")]),"main-nav":a(()=>[e(l.$slots,"main-nav")]),"main-content-before":a(()=>[e(l.$slots,"main-content-before")]),"main-content":a(()=>[e(l.$slots,"main-content")]),"main-content-after":a(()=>[e(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(l.$slots,"main-nav-after")]),comment:a(()=>[e(l.$slots,"comment")]),footer:a(()=>[e(l.$slots,"footer")]),aside:a(()=>[e(l.$slots,"aside")]),"aside-custom":a(()=>[e(l.$slots,"aside-custom")]),default:a(()=>[e(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{X as default,A as usePageData};
