import{_ as g}from"./ValaxyMain.vue_vue_type_style_index_0_lang.45YYFxBa.js";import{f as m,a as u}from"./chunks/vue-router.aOcOW5FA.js";import{A as d,M as y,a3 as a,u as E,N as F,U as e,S as s,W as i}from"./framework.CrQDr1gD.js";import"./app.BysTI9HO.js";import"./chunks/dayjs.Byk5cVHE.js";import"./chunks/vue-i18n.KUtIpHG9.js";import"./chunks/pinia.HY29yXn_.js";import"./chunks/@vueuse/motion.CRM0IDQD.js";import"./chunks/nprogress.Cino7761.js";import"./YunComment.vue_vue_type_style_index_0_lang.BF_gtew7.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.BK-sBKTS.js";import"./post.B3t-mDxK.js";const f=m("/posts/myNotes/guide/Install_Cuda_and_pytorch_in_WSL",async n=>JSON.parse('{"title":"WSL2中安装Cuda和Pytorch","description":"","frontmatter":{"layout":"post","title":"WSL2中安装Cuda和Pytorch","date":"2024-08-31 21:55:00","excerpt":"记录一下怎么在WSL2中安装的Cuda+cudnn和conda+pytorch"},"headers":[{"level":2,"title":"注意事项","slug":"注意事项","link":"#注意事项","children":[{"level":3,"title":"网络问题","slug":"网络问题","link":"#网络问题","children":[]},{"level":3,"title":"WSL内存问题","slug":"wsl内存问题","link":"#wsl内存问题","children":[]}]}],"relativePath":"pages/posts/myNotes/guide/Install_Cuda_and_pytorch_in_WSL.md","lastUpdated":null}'),{lazy:(n,h)=>n.name===h.name}),N={__name:"Install_Cuda_and_pytorch_in_WSL",setup(n,{expose:h}){var o;const{data:r}=f(),p=u(),l=Object.assign(p.meta.frontmatter||{},((o=r.value)==null?void 0:o.frontmatter)||{});return p.meta.frontmatter=l,d("pageData",r.value),d("valaxy:frontmatter",l),globalThis.$frontmatter=l,h({frontmatter:{layout:"post",title:"WSL2中安装Cuda和Pytorch",date:"2024-08-31 21:55:00",excerpt:"记录一下怎么在WSL2中安装的Cuda+cudnn和conda+pytorch"}}),(t,k)=>{const c=g;return F(),y(c,{frontmatter:E(l)},{"main-content-md":a(()=>k[0]||(k[0]=[s("p",null,[i("参考资料：来自"),s("a",{href:"https://www.gongsunqi.xyz/",target:"_blank",rel:"noreferrer"},"公孙启"),i("的文章"),s("a",{href:"https://www.gongsunqi.xyz/posts/3c995b2a/",target:"_blank",rel:"noreferrer"},"《Windows11 + WSL Ubuntu + Pycharm + Conda for deeplearning》"),i("以及对应的视频"),s("a",{href:"https://www.bilibili.com/video/BV1Am4y1G7Pv",target:"_blank",rel:"noreferrer"},"【深度学习：wsl ubuntu安装cuda和cudnn】")],-1),s("p",null,"教程很完整没有什么坑，该文仅作记录。",-1),s("h2",{id:"注意事项",tabindex:"-1"},[i("注意事项 "),s("a",{class:"header-anchor",href:"#注意事项","aria-label":'Permalink to "注意事项"'},"​")],-1),s("h3",{id:"网络问题",tabindex:"-1"},[i("网络问题 "),s("a",{class:"header-anchor",href:"#网络问题","aria-label":'Permalink to "网络问题"'},"​")],-1),s("p",null,[i("安装过程中可能会遇到"),s("strong",null,"下载速度很慢"),i("的问题，需要挂代理。因为用的是WSL，可以选择主机（即正在使用的windwos系统）开代理，wsl连接主机的代理端口。")],-1),s("p",null,"给出一个现成的脚本如下：",-1),s("div",{style:{"max-height":"500px"},class:"language-sh vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sh"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#!/bin/bash")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 查找主机的IP地址")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"host_ip"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cat"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/resolv.conf"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"grep"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "nameserver"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cut"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' " "'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 设置代理，其中7890修改为主机设置的代理服务器端口，")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ALL_PROXY"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"http://'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$host_ip"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},':7890"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," http_proxy"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"http://'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$host_ip"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},':7890"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," https_proxy"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"http://'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$host_ip"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},':7890"')])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("将这个脚本放在 "),s("code",null,"/etc/profile.d/"),i(" 目录下，就会在启动时自动设置代理。")],-1),s("p",null,"设置代理后还要注意一下防火墙，设置完代理后可能网络直接卡住，这个时候可以ping一下主机，如果 WSL2 虚拟机无法 ping 通主机，但是可以 ping 通百度，说明是宿主机的防火墙没有设置 WSL 入站规则。可以登录管理员账号执行：",-1),s("div",{style:{"max-height":"500px"},class:"language-powershell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"powershell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"New-NetFirewallRule"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DisplayName "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WSL"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Direction Inbound  "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"InterfaceAlias "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"vEthernet (WSL)"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  -"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Action Allow")])])]),s("button",{class:"collapse"})],-1),s("h3",{id:"wsl内存问题",tabindex:"-1"},[i("WSL内存问题 "),s("a",{class:"header-anchor",href:"#wsl内存问题","aria-label":'Permalink to "WSL内存问题"'},"​")],-1),s("p",null,"WSl比正常使用linux更加耗内存，而且疑似存在内存泄漏，建议用一段时间后重启一下。",-1),s("p",null,[i("加入遇到内存不够无法编译的情况，少开几个线程，或者设置wsl的swap分区大小,参考"),s("a",{href:"https://learn.microsoft.com/zh-cn/windows/wsl/wsl-config#example-wslconfig-file",target:"_blank",rel:"noreferrer"},"微软WSL文档")],-1),s("p",null,[i("新建文件 "),s("code",null,"C:\\Users\\<UserName>\\.wslconfig"),i("，写入")],-1),s("div",{style:{"max-height":"500px"},class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"[wsl2]")]),i(`
`),s("span",{class:"line"},[s("span",null,"swap = 80GB")]),i(`
`),s("span",{class:"line"},[s("span",null,"swapfile=C:\\\\temp\\\\wsl-swap.vhdx")]),i(`
`),s("span",{class:"line"},[s("span",null,"memory = 16GB")])])]),s("button",{class:"collapse"})],-1),s("p",null,"具体大小视情况修改。",-1)])),"main-header":a(()=>[e(t.$slots,"main-header")]),"main-header-after":a(()=>[e(t.$slots,"main-header-after")]),"main-nav":a(()=>[e(t.$slots,"main-nav")]),"main-content-before":a(()=>[e(t.$slots,"main-content-before")]),"main-content":a(()=>[e(t.$slots,"main-content")]),"main-content-after":a(()=>[e(t.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(t.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(t.$slots,"main-nav-after")]),comment:a(()=>[e(t.$slots,"comment")]),footer:a(()=>[e(t.$slots,"footer")]),aside:a(()=>[e(t.$slots,"aside")]),"aside-custom":a(()=>[e(t.$slots,"aside-custom")]),default:a(()=>[e(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{N as default,f as usePageData};
